@using global::Blazor.Diagrams.Core.Models

<div class="drop-shadow-lg bg-white border my-node">
	<div class="bg-main pa-2 mb-1 font-semibold text-white uppercase title">
		@Node.Node.Name
	</div>

	@foreach (var port in Node.Ports.OfType<GraphPortModel>())
	{
		var isInput = port.Alignment == PortAlignment.Left;
		<div class="@($"row relative w100 {(isInput ? "input" : "output")}")">
			<div class="name">
				<span class="@(isInput ? "pl-3 pr-1" : "pr-3 pl-1")">@port.Connection.Name</span>
			</div>

			<MudTooltip Text="@port.Connection.Type.FriendlyName" Placement="Placement.Top">
				<PortRenderer @key="port" Port="port" Class="rounded-full absolute" Style="@("background-color:" + port.PortColor)" />
			</MudTooltip>

			@if (isInput && port.Connection.Type.AllowTextboxEdit && port.Links.Count == 0)
			{
				<MudTextField T="string" Class="border rounded pr-2" Value="@port.Connection.TextboxValue" Label="@port.Connection.Name" Variant="Variant.Outlined" Margin="Margin.Dense" />
			}
		</div>

	}
</div>

@code {

	[Parameter]
	public GraphNodeModel Node { get; set; } = null!;

}